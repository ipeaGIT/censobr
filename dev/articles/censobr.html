<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to censobr • censobr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to censobr">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">censobr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.4.19999</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/censobr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/census_tracts_data.html">Census tract-level data</a></li>
    <li><a class="dropdown-item" href="../articles/documentation.html">Census documentation</a></li>
    <li><a class="dropdown-item" href="../articles/larger_than_memory.html">Working with larger-than-memory data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ipeaGIT/censobr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to censobr</h1>
            
            <h4 data-toc-skip class="date">2025-07-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/censobr/blob/main/vignettes/censobr.Rmd" class="external-link"><code>vignettes/censobr.Rmd</code></a></small>
      <div class="d-none name"><code>censobr.Rmd</code></div>
    </div>

    
    
<p><strong>{censobr}</strong> is an R package to download data from
Brazil’s Population Census. It provides a very simple and efficient way
to download and read the data sets and documentation of all the
population censuses taken in and after 1960 in the country. The
<strong>{censobr}</strong> package is built on top of the <a href="https://arrow.apache.org/docs/r/" class="external-link">Arrow platform</a>, which allows
users to work with larger-than-memory census data using <a href="https://arrow.apache.org/docs/r/articles/arrow.html#analyzing-arrow-data-with-dplyr" class="external-link">{dplyr}
familiar functions</a>.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install from CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"censobr"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># or use the development version with latest features</span></span>
<span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/remove.packages.html" class="external-link">remove.packages</a></span><span class="op">(</span><span class="st">'censobr'</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ipeaGIT/censobr"</span>, ref<span class="op">=</span><span class="st">"dev"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<p>The package currently includes 6 main functions to download census
data:</p>
<ol style="list-style-type: decimal">
<li><code><a href="../reference/read_population.html">read_population()</a></code></li>
<li><code><a href="../reference/read_households.html">read_households()</a></code></li>
<li><code><a href="../reference/read_mortality.html">read_mortality()</a></code></li>
<li><code><a href="../reference/read_families.html">read_families()</a></code></li>
<li><code><a href="../reference/read_emigration.html">read_emigration()</a></code></li>
<li><code><a href="../reference/read_tracts.html">read_tracts()</a></code></li>
</ol>
<table cellpadding="0" cellspacing="0" style="border-collapse:collapse" border="1" class="table">
<thead>
<tr>
<th rowspan="2">
<center>
Função
</center>
</th>
<th rowspan="2">
<center>
Origem
</center>
</th>
<th rowspan="2">
<center>
Unidade
</center>
</th>
<th rowspan="2">
<center>
Definição
</center>
</th>
<th colspan="7">
<center>
Disponibilidade
</center>
</th>
</tr>
<tr>
<th>
1960
</th>
<th>
70
</th>
<th>
80
</th>
<th>
91
</th>
<th>
2000
</th>
<th>
10
</th>
<th>
22
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
read_population()
</td>
<td>
Amostra
</td>
<td>
Microdado
</td>
<td>
Lê os microdados de pessoas.
</td>
<td>
X
</td>
<td>
X
</td>
<td>
X
</td>
<td>
X
</td>
<td>
</td>
<td>
X
</td>
<td>
<i>em breve</i>
</td>
</tr>
<tr>
<td>
read_households()
</td>
<td>
Amostra
</td>
<td>
Microdado
</td>
<td>
Lê os microdados de domicílios.
</td>
<td>
X
</td>
<td>
X
</td>
<td>
X
</td>
<td>
X
</td>
<td>
X
</td>
<td>
X
</td>
<td>
<i>em breve</i>
</td>
</tr>
<tr>
<td>
read_families()
</td>
<td>
Amostra
</td>
<td>
Microdado
</td>
<td>
Lê os microdados de famílias do censo de 2000.
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
X
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
read_emigration()
</td>
<td>
Amostra
</td>
<td>
Microdado
</td>
<td>
Lê os microdados de emigração.
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
X
</td>
<td>
</td>
<td>
<i>em breve</i>
</td>
</tr>
<tr>
<td>
read_mortality()
</td>
<td>
Amostra
</td>
<td>
Microdado
</td>
<td>
Lê os microdados de mortalidade.
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
X
</td>
<td>
<i>em breve</i>
</td>
</tr>
<tr>
<td>
read_tracts()
</td>
<td>
Universo
</td>
<td>
Setor Censitário
</td>
<td>
Lê os dados do Universo agregados por setores censitários.
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
<i>em breve</i>
</td>
<td>
X
</td>
<td>
<i>X</i>
</td>
</tr>
</tbody>
</table>
<p><strong>{censobr}</strong> also includes a few support functions to
help users navigate the documentation Brazilian censuses, providing
convenient information on data variables and methodology.:</p>
<ol start="7" style="list-style-type: decimal">
<li><code><a href="../reference/data_dictionary.html">data_dictionary()</a></code></li>
<li><code><a href="../reference/questionnaire.html">questionnaire()</a></code></li>
<li><code><a href="../reference/interview_manual.html">interview_manual()</a></code></li>
</ol>
<p>Finally, the package includes a function to help users to manage the
data cached locally.</p>
<ol start="10" style="list-style-type: decimal">
<li><code><a href="../reference/censobr_cache.html">censobr_cache()</a></code></li>
</ol>
<p>The syntax of all <strong>{censobr}</strong> functions to read data
operate on the same logic so it becomes intuitive to download any data
set using a single line of code. Like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/read_households.html">read_households</a></span><span class="op">(</span></span>
<span>  <span class="va">year</span>,          <span class="co"># year of reference</span></span>
<span>  <span class="va">columns</span>,       <span class="co"># select columns to read</span></span>
<span>  <span class="va">add_labels</span>,    <span class="co"># add labels to categorical variables</span></span>
<span>  <span class="va">as_data_frame</span>, <span class="co"># return an Arrow DataSet or a data.frame</span></span>
<span>  <span class="va">showProgress</span>,  <span class="co"># show download progress bar</span></span>
<span>  <span class="va">cache</span>          <span class="co"># cache data for faster access later</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><strong><em>Note:</em></strong> all data sets in
<strong>{censobr}</strong> are enriched with geography columns following
the name standards of the <a href="https://github.com/ipeaGIT/geobr/" class="external-link">{geobr} package</a> to help
data manipulation and integration with spatial data from {geobr}. The
added columns are:
<code>c(‘code_muni’, ‘code_state’, ‘abbrev_state’, ‘name_state’, ‘code_region’, ‘name_region’, ‘code_weighting’)</code>.</p>
<p><strong><em>Data Cache:</em></strong></p>
<p>The first time the user runs a function, <strong>{censobr}</strong>
will download the file and store it locally. This way, the data only
needs to be downloaded once. More info in the <a href="https://ipeagit.github.io/censobr/articles/censobr.html#data-cache">Data
cache section</a> below.</p>
</div>
<div class="section level2">
<h2 id="larger-than-memory-data">Larger-than-memory Data<a class="anchor" aria-label="anchor" href="#larger-than-memory-data"></a>
</h2>
<p>Data of Brazilian censuses are often too big to load in users’ RAM
memory. To avoid this problem, <strong>{censobr}</strong> will by
default return an <a href="https://arrow.apache.org/docs/r/articles/arrow.html#tabular-data-in-arrow" class="external-link">Arrow
table</a>, which can be analyzed like a regular <code>data.frame</code>
using the <code>dplyr</code> package without loading the full data to
memory.</p>
<p>Let’s see how <strong>{censobr}</strong> works in a couple
examples:</p>
</div>
<div class="section level2">
<h2 id="reproducible-examples">Reproducible examples<a class="anchor" aria-label="anchor" href="#reproducible-examples"></a>
</h2>
<p>First, let’s load the libraries we’ll be using in this vignette.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ipeaGIT/censobr" class="external-link">censobr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/apache/arrow/" class="external-link">arrow</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="using-population-data">Using Population data:<a class="anchor" aria-label="anchor" href="#using-population-data"></a>
</h4>
<p>In this example we’ll be calculating the proportion of people with
higher education in different racial groups in the state of Rio de
Janeiro. First, we need to use the <code><a href="../reference/read_population.html">read_population()</a></code>
function to download the population data set.</p>
<p>Since we don’t need to load to memory all columns from the data, we
can pass a vector with the names of the columns we’re going to use. This
might be necessary in more constrained computing environments. Note that
by setting <code>add_labels = 'pt'</code>, the function returns labeled
values for categorical variables.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pop</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_population.html">read_population</a></span><span class="op">(</span></span>
<span>  year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>  columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'abbrev_state'</span>, <span class="st">'V0606'</span>, <span class="st">'V0010'</span>, <span class="st">'V6400'</span><span class="op">)</span>,</span>
<span>  add_labels <span class="op">=</span> <span class="st">'pt'</span>,</span>
<span>  showProgress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">pop</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "arrow_dplyr_query"</span></span></code></pre></div>
<p>By default, the output of the function is an
<code>"arrow_dplyr_query"</code>. This is makes it possible for you to
work with the census data in a super fast and efficient way, even though
the data set might be to big for your computer memory. By setting the
parameter <code>as_data_frame = TRUE</code>, the read functions load the
entire output to memory as a <code>data.frame</code>. <em>Warning:</em>
This can cause the R session to crash in computationally constrained
environments.</p>
<p>The output of the read functions in <strong>{censobr}</strong> can be
analyzed like a regular <code>data.frame</code> using the
<a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> package. For example, one can have a quick peak
into the data set with <code><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse()</a></code></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">pop</span><span class="op">)</span></span>
<span><span class="co">#&gt; FileSystemDataset with 1 Parquet file (query)</span></span>
<span><span class="co">#&gt; 20,635,472 rows x 4 columns</span></span>
<span><span class="co">#&gt; $ abbrev_state <span style="color: #949494; font-style: italic;">&lt;string&gt;</span> "RO", "RO", "RO", "RO", "RO", "RO", "RO", "RO", "RO", "R…</span></span>
<span><span class="co">#&gt; $ V0606        <span style="color: #949494; font-style: italic;">&lt;string&gt;</span> "Parda", "Parda", "Branca", "Branca", "Parda", "Parda", …</span></span>
<span><span class="co">#&gt; $ V0010        <span style="color: #949494; font-style: italic;">&lt;double&gt;</span> 8.705865, 8.705865, 9.818689, 9.495608, 9.495608, 9.4956…</span></span>
<span><span class="co">#&gt; $ V6400        <span style="color: #949494; font-style: italic;">&lt;string&gt;</span> "Sem instrução e fundamental incompleto", "Sem instrução…</span></span>
<span><span class="co">#&gt; Call `print()` for query details</span></span></code></pre></div>
<p>In the example below, we use the <code>dplyr</code> syntax to (a)
filter observations for the state of Rio de Janeiro, (b) group
observations by racial group, (c) summarize the data calculating the
proportion of individuals with higher education. Note that we need to
add a <code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect()</a></code> call at the end of our query.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">pop</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">abbrev_state</span> <span class="op">==</span> <span class="st">"RJ"</span><span class="op">)</span> <span class="op">|&gt;</span>                                                    <span class="co"># (a)</span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">compute</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">V0606</span><span class="op">)</span> <span class="op">|&gt;</span>                                                                 <span class="co"># (b)</span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>higher_edu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">V0010</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">V6400</span><span class="op">==</span><span class="st">"Superior completo"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">V0010</span><span class="op">)</span>, <span class="co"># (c)</span></span>
<span>                pop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">V0010</span><span class="op">)</span> <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   V0606    higher_edu      pop</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Amarela      0.078<span style="text-decoration: underline;">2</span>  <span style="text-decoration: underline;">122</span>552.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Branca       0.151  7<span style="text-decoration: underline;">579</span>023.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Ignorado     0         <span style="text-decoration: underline;">3</span>397.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Indígena     0.109    <span style="text-decoration: underline;">15</span>258.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Parda        0.044<span style="text-decoration: underline;">3</span> 6<span style="text-decoration: underline;">332</span>408.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Preta        0.040<span style="text-decoration: underline;">5</span> 1<span style="text-decoration: underline;">937</span>291.</span></span></code></pre></div>
<p>Now we only need to plot the results.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">V0606</span> <span class="op">!=</span> <span class="st">'Ignorado'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">V0606</span>, y<span class="op">=</span><span class="va">higher_edu</span><span class="op">)</span>, fill <span class="op">=</span> <span class="st">'#5c997e'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">'Proportion with higher education'</span>,</span>
<span>                     labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">'Cor/raça'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="censobr_files/figure-html/unnamed-chunk-7-1.png" width="100%"></p>
</div>
<div class="section level4">
<h4 id="using-household-data">Using household data:<a class="anchor" aria-label="anchor" href="#using-household-data"></a>
</h4>
<div class="section level5">
<h5 id="sewage-coverage">Sewage coverage:<a class="anchor" aria-label="anchor" href="#sewage-coverage"></a>
</h5>
<p>In this example, we are going to map the proportion of households
connected to a sewage network in Brazilian municipalities First, we can
easily download the households data set with the
<code><a href="../reference/read_households.html">read_households()</a></code> function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_households.html">read_households</a></span><span class="op">(</span></span>
<span>  year <span class="op">=</span> <span class="fl">2010</span>, </span>
<span>  showProgress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Now we’re going to (a) group observations by municipality, (b) get
the number of households connected to a sewage network, (c) calculate
the proportion of households connected, and (d) collect the results.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">esg</span> <span class="op">&lt;-</span> <span class="va">hs</span> <span class="op">|&gt;</span> </span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">compute</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">code_muni</span><span class="op">)</span> <span class="op">|&gt;</span>                                             <span class="co"># (a)</span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>rede <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">V0010</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">V0207</span><span class="op">==</span><span class="st">'1'</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,                    <span class="co"># (b)</span></span>
<span>                  total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">V0010</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span>                                   <span class="co"># (b)</span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>cobertura <span class="op">=</span> <span class="va">rede</span> <span class="op">/</span> <span class="va">total</span><span class="op">)</span> <span class="op">|&gt;</span>                                <span class="co"># (c)</span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span>                                                          <span class="co"># (d)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">esg</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   code_muni     rede  total cobertura</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>   1<span style="text-decoration: underline;">100</span>015     0     <span style="text-decoration: underline;">7</span>443.   0      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>   1<span style="text-decoration: underline;">100</span>023   182.   <span style="text-decoration: underline;">27</span>654.   0.006<span style="text-decoration: underline;">60</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>   1<span style="text-decoration: underline;">100</span>031     0     <span style="text-decoration: underline;">1</span>979.   0      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>   1<span style="text-decoration: underline;">100</span>049 <span style="text-decoration: underline;">10</span>019.   <span style="text-decoration: underline;">24</span>413.   0.410  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>   1<span style="text-decoration: underline;">100</span>056     5.81  <span style="text-decoration: underline;">5</span>399    0.001<span style="text-decoration: underline;">08</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>   1<span style="text-decoration: underline;">100</span>064    28.9   <span style="text-decoration: underline;">6</span>013.   0.004<span style="text-decoration: underline;">80</span></span></span></code></pre></div>
<p>In order to create a map with these values, we are going to use the
<a href="https://ipeagit.github.io/geobr/" class="external-link">{geobr} package</a> to
download the geometries of Brazilian municipalities.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ipeagit.github.io/geobr/" class="external-link">geobr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">muni_sf</span> <span class="op">&lt;-</span> <span class="fu">geobr</span><span class="fu">::</span><span class="fu"><a href="https://ipeagit.github.io/geobr/reference/read_municipality.html" class="external-link">read_municipality</a></span><span class="op">(</span></span>
<span>  year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>  showProgress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">muni_sf</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 6 features and 4 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -63.61822 ymin: -13.6937 xmax: -60.33317 ymax: -9.66916</span></span>
<span><span class="co">#&gt; Geodetic CRS:  SIRGAS 2000</span></span>
<span><span class="co">#&gt;   code_muni             name_muni code_state abbrev_state</span></span>
<span><span class="co">#&gt; 1   1100015 Alta Floresta D'oeste         11           RO</span></span>
<span><span class="co">#&gt; 2   1100023             Ariquemes         11           RO</span></span>
<span><span class="co">#&gt; 3   1100031                Cabixi         11           RO</span></span>
<span><span class="co">#&gt; 4   1100049                Cacoal         11           RO</span></span>
<span><span class="co">#&gt; 5   1100056            Cerejeiras         11           RO</span></span>
<span><span class="co">#&gt; 6   1100064     Colorado Do Oeste         11           RO</span></span>
<span><span class="co">#&gt;                             geom</span></span>
<span><span class="co">#&gt; 1 MULTIPOLYGON (((-62.2462 -1...</span></span>
<span><span class="co">#&gt; 2 MULTIPOLYGON (((-63.13712 -...</span></span>
<span><span class="co">#&gt; 3 MULTIPOLYGON (((-60.52408 -...</span></span>
<span><span class="co">#&gt; 4 MULTIPOLYGON (((-61.42679 -...</span></span>
<span><span class="co">#&gt; 5 MULTIPOLYGON (((-61.41347 -...</span></span>
<span><span class="co">#&gt; 6 MULTIPOLYGON (((-60.66352 -...</span></span></code></pre></div>
<p>Now we only need to merge the spatial data with our estimates and map
the results.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">esg_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">muni_sf</span>, <span class="va">esg</span>, by <span class="op">=</span> <span class="st">'code_muni'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">esg_sf</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">cobertura</span><span class="op">)</span>, color<span class="op">=</span><span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Share of households connected to a sewage network"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_distiller</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Greens"</span>, direction <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                       name<span class="op">=</span><span class="st">'Share of\nhouseholds'</span>, </span>
<span>                       labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="censobr_files/figure-html/unnamed-chunk-11-1.png" width="100%"></p>
</div>
<div class="section level5">
<h5 id="spatial-distribution-of-rents">Spatial distribution of rents:<a class="anchor" aria-label="anchor" href="#spatial-distribution-of-rents"></a>
</h5>
<p>In this final example, we’re going to visualize how the amount of
money people spend on rent varies spatially across the metropolitan area
of São Paulo.</p>
<p>First, let’s download the municipalities of the metro area of São
Paulo.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metro_muni</span> <span class="op">&lt;-</span> <span class="fu">geobr</span><span class="fu">::</span><span class="fu"><a href="https://ipeagit.github.io/geobr/reference/read_metro_area.html" class="external-link">read_metro_area</a></span><span class="op">(</span></span>
<span>  year <span class="op">=</span> <span class="fl">2010</span>, </span>
<span>  showProgress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">name_metro</span> <span class="op">==</span> <span class="st">"RM São Paulo"</span><span class="op">)</span></span></code></pre></div>
<p>We also need the polygons of the weighting areas (áreas de
ponderação). With the code below, we download all weighting areas in the
state of São Paulo, and then keep only the ones in the metropolitan
region of São Paulo.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wt_areas</span> <span class="op">&lt;-</span> <span class="fu">geobr</span><span class="fu">::</span><span class="fu"><a href="https://ipeagit.github.io/geobr/reference/read_weighting_area.html" class="external-link">read_weighting_area</a></span><span class="op">(</span></span>
<span>  code_weighting <span class="op">=</span> <span class="st">"SP"</span>, </span>
<span>  showProgress <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2010</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">wt_areas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">wt_areas</span>, <span class="va">code_muni</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">metro_muni</span><span class="op">$</span><span class="va">code_muni</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">wt_areas</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 6 features and 7 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -46.73454 ymin: -23.64487 xmax: -46.64756 ymax: -23.53528</span></span>
<span><span class="co">#&gt; Geodetic CRS:  SIRGAS 2000</span></span>
<span><span class="co">#&gt;    code_weighting code_muni name_muni code_state abbrev_state code_region</span></span>
<span><span class="co">#&gt; 5   3550308005100   3550308 São Paulo         35           SP           3</span></span>
<span><span class="co">#&gt; 6   3550308005102   3550308 São Paulo         35           SP           3</span></span>
<span><span class="co">#&gt; 8   3550308005101   3550308 São Paulo         35           SP           3</span></span>
<span><span class="co">#&gt; 10  3550308005104   3550308 São Paulo         35           SP           3</span></span>
<span><span class="co">#&gt; 12  3550308005103   3550308 São Paulo         35           SP           3</span></span>
<span><span class="co">#&gt; 14  3550308005106   3550308 São Paulo         35           SP           3</span></span>
<span><span class="co">#&gt;    name_region                           geom</span></span>
<span><span class="co">#&gt; 5      Sudeste MULTIPOLYGON (((-46.67201 -...</span></span>
<span><span class="co">#&gt; 6      Sudeste MULTIPOLYGON (((-46.67663 -...</span></span>
<span><span class="co">#&gt; 8      Sudeste MULTIPOLYGON (((-46.67257 -...</span></span>
<span><span class="co">#&gt; 10     Sudeste MULTIPOLYGON (((-46.70138 -...</span></span>
<span><span class="co">#&gt; 12     Sudeste MULTIPOLYGON (((-46.69581 -...</span></span>
<span><span class="co">#&gt; 14     Sudeste MULTIPOLYGON (((-46.73454 -...</span></span></code></pre></div>
<p>Now we need to calculate the average rent spent in each weighting
area. Using the national household data set, we’re going to (a) filter
only observations in our municipalities of interest, (b) group
observations by weighting area, (c) calculate the average rent, and (d)
collect the results.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rent</span> <span class="op">&lt;-</span> <span class="va">hs</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">code_muni</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">metro_muni</span><span class="op">$</span><span class="va">code_muni</span><span class="op">)</span> <span class="op">|&gt;</span>                     <span class="co"># (a)</span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">compute</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">code_weighting</span><span class="op">)</span> <span class="op">|&gt;</span>                                        <span class="co"># (b)</span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>avgrent<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/weighted.mean.html" class="external-link">weighted.mean</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">V2011</span>, w<span class="op">=</span><span class="va">V0010</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span>  <span class="co"># (c)</span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span>                                                          <span class="co"># (d)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rent</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 2</span></span></span>
<span><span class="co">#&gt;   code_weighting avgrent</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 3503901003001     355.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 3503901003002     627.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3503901003003     358.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 3505708005001     577.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 3505708005002     397.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 3505708005003     327.</span></span></code></pre></div>
<p>Finally, we can merge the spatial data with our rent estimates and
map the results.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rent_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">wt_areas</span>, <span class="va">rent</span>, by <span class="op">=</span> <span class="st">'code_weighting'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">rent_sf</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">avgrent</span><span class="op">)</span>, color<span class="op">=</span><span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">metro_muni</span>, color<span class="op">=</span><span class="st">'gray'</span>, fill<span class="op">=</span><span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_distiller</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Greens"</span>, direction <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                       name<span class="op">=</span><span class="st">'Avgerage\nRent in R$'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="censobr_files/figure-html/unnamed-chunk-15-1.png" width="100%"></p>
</div>
</div>
<div class="section level3">
<h3 id="data-cache">Data cache<a class="anchor" aria-label="anchor" href="#data-cache"></a>
</h3>
<p>The first time the user runs a function, <strong>{censobr}</strong>
will download the file and store it locally. This way, the data only
needs to be downloaded once. When the <code>cache</code> parameter is
set to <code>TRUE</code> (Default), the function will read the cached
data, which is much faster.</p>
<p>Users can manage the cached data sets using the
<code><a href="../reference/censobr_cache.html">censobr_cache()</a></code> function. For example, users can:</p>
<p>List cached files in tree format:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">censobr</span><span class="fu">::</span><span class="fu"><a href="../reference/censobr_cache.html">censobr_cache</a></span><span class="op">(</span></span>
<span>  list_files <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>  print_tree <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Delete a particular file:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">censobr</span><span class="fu">::</span><span class="fu"><a href="../reference/censobr_cache.html">censobr_cache</a></span><span class="op">(</span>delete_file <span class="op">=</span> <span class="st">"2010_emigration"</span><span class="op">)</span></span></code></pre></div>
<p>Delete all files:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">censobr</span><span class="fu">::</span><span class="fu"><a href="../reference/censobr_cache.html">censobr_cache</a></span><span class="op">(</span>delete_file <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></code></pre></div>
<p>By default, <strong>{censobr}</strong> files are saved in the ‘User’
directory. However, users can run the function
<code><a href="../reference/set_censobr_cache_dir.html">set_censobr_cache_dir()</a></code> to set custom cache directory. This
directory is persistent across R sessions.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tempf</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/file_temp.html" class="external-link">path_temp</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"my_temp_dir"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">censobr</span><span class="fu">::</span><span class="fu"><a href="../reference/set_censobr_cache_dir.html">set_censobr_cache_dir</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">tempf</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> censobr files will be cached at</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">/tmp/RtmpP2VPs1/my_temp_dir</span>.</span></span></code></pre></div>
<p>Mind you that the data is saved in a directory inside the cache
directory set by the user and which is versioned according to the
version of the latest data release.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># download file to our new cache dir</span></span>
<span><span class="va">df_emi</span> <span class="op">&lt;-</span> <span class="fu">censobr</span><span class="fu">::</span><span class="fu"><a href="../reference/read_emigration.html">read_emigration</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2010</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check files in current cache dir</span></span>
<span><span class="fu">censobr</span><span class="fu">::</span><span class="fu"><a href="../reference/censobr_cache.html">censobr_cache</a></span><span class="op">(</span></span>
<span>  list_files <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>  print_tree <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">/tmp/RtmpP2VPs1/my_temp_dir</span></span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">data_release_v0.5.0</span></span></span>
<span><span class="co">#&gt;     └── 2010_emigration_v0.5.0.parquet</span></span></code></pre></div>
<p>If you do not remember the location of the cache, you can always run
<code><a href="../reference/get_censobr_cache_dir.html">get_censobr_cache_dir()</a></code> to return the path of the cache
directory in use, or run <code>set_censobr_cache_dir(path = NULL)</code>
to set the default cache directory back.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rafael H. M. Pereira, Rogério J. Barbosa, Ipea - Institute for Applied Economic Research.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
